{"ast":null,"code":"import _regeneratorRuntime from \"/home/devika/FinalYear/blockchain/loanBCT/Blockchain-Simple-Loan-IOU-Application/client/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/home/devika/FinalYear/blockchain/loanBCT/Blockchain-Simple-Loan-IOU-Application/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"/home/devika/FinalYear/blockchain/loanBCT/Blockchain-Simple-Loan-IOU-Application/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/devika/FinalYear/blockchain/loanBCT/Blockchain-Simple-Loan-IOU-Application/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/devika/FinalYear/blockchain/loanBCT/Blockchain-Simple-Loan-IOU-Application/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/devika/FinalYear/blockchain/loanBCT/Blockchain-Simple-Loan-IOU-Application/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/devika/FinalYear/blockchain/loanBCT/Blockchain-Simple-Loan-IOU-Application/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/devika/FinalYear/blockchain/loanBCT/Blockchain-Simple-Loan-IOU-Application/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/devika/FinalYear/blockchain/loanBCT/Blockchain-Simple-Loan-IOU-Application/client/src/components/loandetails.jsx\";\nimport React, { Component } from \"react\";\nimport { Redirect } from 'react-router-dom';\nimport SimpleLoanContract from \"../contracts/SimpleLoan.json\";\n\nvar LoanDetails =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LoanDetails, _Component);\n\n  function LoanDetails() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, LoanDetails);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(LoanDetails)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      formTitle: \"Contract - \",\n      loan: {\n        owner: null,\n        borrower: null,\n        loanAmount: null,\n        status: null,\n        lenderCount: 0\n      },\n      lenders: []\n    };\n\n    _this.handleFundIt =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        var web3, loanAmount, IRate, lenderAddr, loan, tx, l;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                web3 = _this.state.web3;\n                loanAmount = web3.utils.toWei(e.target.fundAmount.value, 'ether');\n                IRate = e.target.interestRate.value != '' ? web3.utils.toWei(e.target.interestRate.value, 'ether') : \"0\";\n                console.log(\"ll\" + loanAmount);\n                console.log(IRate);\n                _context.next = 8;\n                return _this.state.web3.eth.coinbase;\n\n              case 8:\n                lenderAddr = _context.sent;\n                _context.prev = 9;\n                loan = new _this.props.web3.eth.Contract(SimpleLoanContract.abi, _this.props.match.params.id);\n                _context.next = 13;\n                return loan.methods.depositFund(IRate).call({\n                  from: lenderAddr,\n                  value: loanAmount\n                });\n\n              case 13:\n                _context.next = 15;\n                return loan.methods.depositFund(IRate).send({\n                  from: lenderAddr,\n                  value: loanAmount\n                });\n\n              case 15:\n                tx = _context.sent;\n                console.log(tx);\n                l = _objectSpread({}, _this.state.loan);\n                l.lenderCount += 1;\n                _context.t0 = _this;\n                _context.next = 22;\n                return loan.methods.status().call();\n\n              case 22:\n                _context.t1 = _context.sent;\n                l.status = _context.t0.getStatusDescription.call(_context.t0, _context.t1);\n\n                _this.setState({\n                  loan: l\n                });\n\n                _context.next = 31;\n                break;\n\n              case 27:\n                _context.prev = 27;\n                _context.t2 = _context[\"catch\"](9);\n                console.log(_context.t2);\n\n                _this.setState({\n                  hasError: true,\n                  errorMessage: _context.t2.message\n                });\n\n              case 31:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[9, 27]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.handleRefund =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(e) {\n        var web3, ownerAddr, loan, tx, l;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                e.preventDefault();\n                web3 = _this.state.web3;\n                _context2.next = 4;\n                return _this.state.web3.eth.coinbase;\n\n              case 4:\n                ownerAddr = _context2.sent;\n                _context2.prev = 5;\n                loan = new _this.props.web3.eth.Contract(SimpleLoanContract.abi, _this.props.match.params.id);\n                _context2.next = 9;\n                return loan.methods.refund().call({\n                  from: ownerAddr\n                });\n\n              case 9:\n                _context2.next = 11;\n                return loan.methods.refund().send({\n                  from: ownerAddr\n                });\n\n              case 11:\n                tx = _context2.sent;\n                console.log(tx);\n                l = _objectSpread({}, _this.state.loan);\n                _context2.t0 = parseInt;\n                _context2.next = 17;\n                return loan.methods.lenderCount().call({\n                  from: ownerAddr\n                });\n\n              case 17:\n                _context2.t1 = _context2.sent;\n                l.lenderCount = (0, _context2.t0)(_context2.t1);\n                _context2.t2 = _this;\n                _context2.next = 22;\n                return loan.methods.status().call();\n\n              case 22:\n                _context2.t3 = _context2.sent;\n                l.status = _context2.t2.getStatusDescription.call(_context2.t2, _context2.t3);\n\n                _this.setState({\n                  loan: l\n                });\n\n                _context2.next = 31;\n                break;\n\n              case 27:\n                _context2.prev = 27;\n                _context2.t4 = _context2[\"catch\"](5);\n                console.log(_context2.t4);\n\n                _this.setState({\n                  hasError: true,\n                  errorMessage: _context2.t4.message\n                });\n\n              case 31:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[5, 27]]);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.handleRepay =\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(e) {\n        var web3, borrowerAddr, loan, ownedAmount, tx, l;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                e.preventDefault();\n                web3 = _this.state.web3;\n                _context3.next = 4;\n                return _this.state.web3.eth.coinbase;\n\n              case 4:\n                borrowerAddr = _context3.sent;\n                _context3.prev = 5;\n                loan = new _this.props.web3.eth.Contract(SimpleLoanContract.abi, _this.props.match.params.id);\n                _context3.next = 9;\n                return loan.methods.ownedAmount().call();\n\n              case 9:\n                ownedAmount = _context3.sent;\n                _context3.next = 12;\n                return loan.methods.repay().call({\n                  from: borrowerAddr,\n                  value: ownedAmount\n                });\n\n              case 12:\n                _context3.next = 14;\n                return loan.methods.repay().send({\n                  from: borrowerAddr,\n                  value: ownedAmount\n                });\n\n              case 14:\n                tx = _context3.sent;\n                console.log(tx);\n                l = _objectSpread({}, _this.state.loan);\n                _context3.t0 = _this;\n                _context3.next = 20;\n                return loan.methods.status().call();\n\n              case 20:\n                _context3.t1 = _context3.sent;\n                l.status = _context3.t0.getStatusDescription.call(_context3.t0, _context3.t1);\n\n                _this.setState({\n                  loan: l,\n                  hasError: false\n                });\n\n                _context3.next = 29;\n                break;\n\n              case 25:\n                _context3.prev = 25;\n                _context3.t2 = _context3[\"catch\"](5);\n                console.log(_context3.t2);\n\n                _this.setState({\n                  hasError: true,\n                  errorMessage: _context3.t2.message\n                });\n\n              case 29:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[5, 25]]);\n      }));\n\n      return function (_x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    _this.handleDefault =\n    /*#__PURE__*/\n    function () {\n      var _ref4 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4(e) {\n        var web3, borrowerAddr, loan, tx, l;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                e.preventDefault();\n                web3 = _this.state.web3;\n                _context4.next = 4;\n                return _this.state.web3.eth.coinbase;\n\n              case 4:\n                borrowerAddr = _context4.sent;\n                _context4.prev = 5;\n                loan = new _this.props.web3.eth.Contract(SimpleLoanContract.abi, _this.props.match.params.id);\n                _context4.next = 9;\n                return loan.methods.toDefault().call({\n                  from: borrowerAddr\n                });\n\n              case 9:\n                _context4.next = 11;\n                return loan.methods.toDefault().send({\n                  from: borrowerAddr\n                });\n\n              case 11:\n                tx = _context4.sent;\n                console.log(tx);\n                l = _objectSpread({}, _this.state.loan);\n                _context4.t0 = _this;\n                _context4.next = 17;\n                return loan.methods.status().call();\n\n              case 17:\n                _context4.t1 = _context4.sent;\n                l.status = _context4.t0.getStatusDescription.call(_context4.t0, _context4.t1);\n\n                _this.setState({\n                  loan: l,\n                  hasError: false\n                });\n\n                _context4.next = 26;\n                break;\n\n              case 22:\n                _context4.prev = 22;\n                _context4.t2 = _context4[\"catch\"](5);\n                console.log(_context4.t2);\n\n                _this.setState({\n                  hasError: true,\n                  errorMessage: _context4.t2.message\n                });\n\n              case 26:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[5, 22]]);\n      }));\n\n      return function (_x4) {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n\n    _this.handleBorrowerWithdraw =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee5() {\n      var web3, borrowerAddr, loan, tx, l;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              web3 = _this.state.web3;\n              _context5.next = 3;\n              return _this.state.web3.eth.coinbase;\n\n            case 3:\n              borrowerAddr = _context5.sent;\n              _context5.prev = 4;\n              loan = new web3.eth.Contract(SimpleLoanContract.abi, _this.props.match.params.id);\n              _context5.next = 8;\n              return loan.methods.withdrawToBorrower().call({\n                from: borrowerAddr\n              });\n\n            case 8:\n              _context5.next = 10;\n              return loan.methods.withdrawToBorrower().send({\n                from: borrowerAddr\n              });\n\n            case 10:\n              tx = _context5.sent;\n              console.log(tx);\n              l = _objectSpread({}, _this.state.loan);\n              _context5.t0 = _this;\n              _context5.next = 16;\n              return loan.methods.status().call();\n\n            case 16:\n              _context5.t1 = _context5.sent;\n              l.status = _context5.t0.getStatusDescription.call(_context5.t0, _context5.t1);\n\n              _this.setState({\n                loan: l,\n                hasError: false\n              });\n\n              _context5.next = 25;\n              break;\n\n            case 21:\n              _context5.prev = 21;\n              _context5.t2 = _context5[\"catch\"](4);\n              console.log(_context5.t2);\n\n              _this.setState({\n                hasError: true,\n                errorMessage: _context5.t2.message\n              });\n\n            case 25:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, this, [[4, 21]]);\n    }));\n    _this.handleWithdrawToLenders =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee6() {\n      var web3, borrowerAddr, loan, tx, l;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              web3 = _this.state.web3;\n              _context6.next = 3;\n              return _this.state.web3.eth.coinbase;\n\n            case 3:\n              borrowerAddr = _context6.sent;\n              _context6.prev = 4;\n              loan = new web3.eth.Contract(SimpleLoanContract.abi, _this.props.match.params.id);\n              _context6.next = 8;\n              return loan.methods.withdrawToLenders().call({\n                from: borrowerAddr\n              });\n\n            case 8:\n              _context6.next = 10;\n              return loan.methods.withdrawToLenders().send({\n                from: borrowerAddr\n              });\n\n            case 10:\n              tx = _context6.sent;\n              console.log(tx);\n              l = _objectSpread({}, _this.state.loan);\n              _context6.t0 = _this;\n              _context6.next = 16;\n              return loan.methods.status().call();\n\n            case 16:\n              _context6.t1 = _context6.sent;\n              l.status = _context6.t0.getStatusDescription.call(_context6.t0, _context6.t1);\n\n              _this.setState({\n                loan: l,\n                hasError: false\n              });\n\n              _context6.next = 25;\n              break;\n\n            case 21:\n              _context6.prev = 21;\n              _context6.t2 = _context6[\"catch\"](4);\n              console.log(_context6.t2);\n\n              _this.setState({\n                hasError: true,\n                errorMessage: _context6.t2.message\n              });\n\n            case 25:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6, this, [[4, 21]]);\n    }));\n    return _this;\n  }\n\n  _createClass(LoanDetails, [{\n    key: \"getStatusDescription\",\n    value: function getStatusDescription(idx) {\n      switch (idx) {\n        case \"0\":\n          return 'Requesting';\n\n        case \"1\":\n          return 'Funding';\n\n        case \"2\":\n          return 'Funded';\n\n        case \"3\":\n          return 'FundWithdrawn';\n\n        case \"4\":\n          return 'Repaid';\n\n        case \"5\":\n          return 'Defaulted';\n\n        case \"6\":\n          return 'Refunded';\n\n        case \"7\":\n          return 'Cancelled';\n\n        case \"8\":\n          return 'Closed';\n\n        default:\n          return 'None';\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.setState({\n        web3: this.props.web3\n      });\n      this.props.onTitle(this.state.formTitle + this.props.match.params.id);\n\n      try {\n        var c = new this.props.web3.eth.Contract(SimpleLoanContract.abi, this.props.match.params.id);\n        c.methods.info().call().then(function (info) {\n          return {\n            owner: info.p_owner,\n            borrower: info.p_borrower,\n            loanAmount: _this2.props.web3.utils.fromWei(info.p_loanAmount, 'ether'),\n            status: _this2.getStatusDescription(info.p_status),\n            lenderCount: parseInt(info.p_lenderCount)\n          };\n        }).then(function (l) {\n          _this2.setState({\n            loan: l\n          });\n\n          _this2.refreshLenders();\n        });\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  }, {\n    key: \"refreshLenders\",\n    value: function () {\n      var _refreshLenders = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee7() {\n        var contract, count, ls, i, l;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.prev = 0;\n                contract = new this.props.web3.eth.Contract(SimpleLoanContract.abi, this.props.match.params.id);\n                _context7.next = 4;\n                return contract.methods.lenderCount().call();\n\n              case 4:\n                count = _context7.sent;\n                ls = [];\n                i = 0;\n\n              case 7:\n                if (!(i < count)) {\n                  _context7.next = 19;\n                  break;\n                }\n\n                _context7.next = 10;\n                return contract.methods.lenderAt(i).call();\n\n              case 10:\n                l = _context7.sent;\n                l.p_lendingAmount = this.props.web3.utils.fromWei(l.p_lendingAmount, 'ether');\n                l.p_repaidAmount = this.props.web3.utils.fromWei(l.p_repaidAmount, 'ether');\n                l.p_refundedAmount = this.props.web3.utils.fromWei(l.p_refundedAmount, 'ether');\n                ls.push(l);\n                console.log(l);\n\n              case 16:\n                i++;\n                _context7.next = 7;\n                break;\n\n              case 19:\n                this.setState({\n                  lenders: ls\n                });\n                _context7.next = 25;\n                break;\n\n              case 22:\n                _context7.prev = 22;\n                _context7.t0 = _context7[\"catch\"](0);\n                console.log(_context7.t0);\n\n              case 25:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[0, 22]]);\n      }));\n\n      function refreshLenders() {\n        return _refreshLenders.apply(this, arguments);\n      }\n\n      return refreshLenders;\n    }()\n  }, {\n    key: \"renderStatus\",\n    value: function renderStatus() {\n      var style = \"badge badge-light\";\n\n      if (this.state.loan.status === 'Funded') {\n        style = 'badge badge-primary';\n      } else if (this.state.loan.status === 'Refunded') {\n        style = \"badge badge-info\";\n      } else if (this.state.loan.status === 'Defaulted') {\n        style = \"badge badge-danger\";\n      } else if (this.state.loan.status === 'Cancelled') {\n        style = \"badge badge-dark\";\n      } else if (this.state.loan.status === 'Closed') {\n        style = \"badge badge-secondary\";\n      } else if (this.state.loan.status === 'FundWithdrawn') {\n        style = \"badge badge-warning\";\n      } else if (this.state.loan.status === 'Repaid') {\n        style = \"badge badge-success\";\n      }\n\n      return React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: style,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, \"Status: \", this.state.loan.status));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, this.state.hasError ? React.createElement(\"div\", {\n        className: \"alert alert-danger\",\n        role: \"alert\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, this.state.errorMessage) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(\"h6\", {\n        htmlFor: \"borrowerAddr\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, \"Owner: \", this.state.loan.owner), React.createElement(\"h6\", {\n        htmlFor: \"borrowerAddr\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, \"Borrower: \", this.state.loan.borrower), React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, \"Loan Amount: \", this.state.loan.loanAmount, \" ETH\"), this.renderStatus())), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }), React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, \"Lender Information\"), React.createElement(LenderTable, {\n        lenders: this.state.lenders,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }), this.state.loan.status === 'Funding' ? React.createElement(\"form\", {\n        className: \"form-inline\",\n        onSubmit: this.handleFundIt,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group mb-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        readOnly: true,\n        className: \"form-control-plaintext\",\n        id: \"staticEmail2\",\n        value: \"Funding Amount\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group mx-sm-3 mb-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        id: \"fundAmount\",\n        placeholder: \"Amount In Ether\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        id: \"interestRate\",\n        placeholder: \"Proposed interest rate\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary mr-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, \"Fund It !!!\")) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, (this.state.loan.status === 'Funding' || this.state.loan.status === 'Funded') && this.state.loan.lenderCount > 0 ? React.createElement(\"button\", {\n        onClick: this.handleRefund,\n        className: \"btn btn-success mr-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, \"Refund to Lenders\") : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }), this.state.loan.status === 'Funded' ? React.createElement(\"button\", {\n        onClick: this.handleBorrowerWithdraw,\n        className: \"btn btn-success mr-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, \"Widthdraw To Borrower Account\") : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }), this.state.loan.status === 'FundWithdrawn' ? React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.handleRepay,\n        className: \"btn btn-success mr-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, \"Repay Account\"), React.createElement(\"button\", {\n        onClick: this.handleDefault,\n        className: \"btn btn-danger mr-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, \"Default Account\")) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }), this.state.loan.status === 'Repaid' ? React.createElement(\"button\", {\n        onClick: this.handleWithdrawToLenders,\n        className: \"btn btn-success mr-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, \"Repay Lender In Full\") : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return LoanDetails;\n}(Component);\n\nvar LenderTable =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(LenderTable, _Component2);\n\n  function LenderTable() {\n    _classCallCheck(this, LenderTable);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(LenderTable).apply(this, arguments));\n  }\n\n  _createClass(LenderTable, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        className: \"table table-bordered\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }, \"#\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, \"Lender Address\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }, \"Lending Amount\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, \"Repaid Amount\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }, \"Refunded Amount\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, \"Proposed Interest Rate\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, this.props.lenders.map(function (l, index) {\n        return React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 284\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 285\n          },\n          __self: this\n        }, ++index), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 286\n          },\n          __self: this\n        }, l.p_lender), React.createElement(\"td\", {\n          className: \"text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 287\n          },\n          __self: this\n        }, l.p_lendingAmount, \" \", React.createElement(\"small\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 287\n          },\n          __self: this\n        }, \"ETH\")), React.createElement(\"td\", {\n          className: \"text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 288\n          },\n          __self: this\n        }, l.p_repaidAmount, \" \", React.createElement(\"small\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 288\n          },\n          __self: this\n        }, \"ETH\")), React.createElement(\"td\", {\n          className: \"text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 289\n          },\n          __self: this\n        }, l.p_refundedAmount, \" \", React.createElement(\"small\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 289\n          },\n          __self: this\n        }, \"ETH\")), React.createElement(\"td\", {\n          className: \"text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 290\n          },\n          __self: this\n        }, l.p_interestRate, \" \", React.createElement(\"small\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 290\n          },\n          __self: this\n        }, \"ETH\")));\n      }))));\n    }\n  }]);\n\n  return LenderTable;\n}(Component);\n\nexport default LoanDetails;","map":{"version":3,"sources":["/home/devika/FinalYear/blockchain/loanBCT/Blockchain-Simple-Loan-IOU-Application/client/src/components/loandetails.jsx"],"names":["React","Component","Redirect","SimpleLoanContract","LoanDetails","state","formTitle","loan","owner","borrower","loanAmount","status","lenderCount","lenders","handleFundIt","e","preventDefault","web3","utils","toWei","target","fundAmount","value","IRate","interestRate","console","log","eth","coinbase","lenderAddr","props","Contract","abi","match","params","id","methods","depositFund","call","from","send","tx","l","getStatusDescription","setState","hasError","errorMessage","message","handleRefund","ownerAddr","refund","parseInt","handleRepay","borrowerAddr","ownedAmount","repay","handleDefault","toDefault","handleBorrowerWithdraw","withdrawToBorrower","handleWithdrawToLenders","withdrawToLenders","idx","onTitle","c","info","then","p_owner","p_borrower","fromWei","p_loanAmount","p_status","p_lenderCount","refreshLenders","error","contract","count","ls","i","lenderAt","p_lendingAmount","p_repaidAmount","p_refundedAmount","push","style","renderStatus","LenderTable","map","index","p_lender","p_interestRate"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Redirect } from 'react-router-dom';\nimport SimpleLoanContract from \"../contracts/SimpleLoan.json\"; \n\nclass LoanDetails extends Component {\n    state = {formTitle: \"Contract - \", loan: { owner: null, borrower: null, loanAmount: null, status: null, lenderCount: 0}, lenders: []};\n\n    getStatusDescription(idx) {\n        switch(idx) {\n            case \"0\": return 'Requesting';\n            case \"1\": return 'Funding';\n            case \"2\": return 'Funded';\n            case \"3\": return 'FundWithdrawn';\n            case \"4\": return 'Repaid';\n            case \"5\": return 'Defaulted';\n            case \"6\": return 'Refunded';\n            case \"7\": return 'Cancelled';\n            case \"8\": return 'Closed';\n            default: return 'None';\n        }\n    }\n    \n    componentDidMount() {\n        this.setState({web3: this.props.web3});\n        this.props.onTitle(this.state.formTitle + this.props.match.params.id);\n        try {\n            const c = new this.props.web3.eth.Contract(SimpleLoanContract.abi, this.props.match.params.id);\n            c.methods.info().call().then(info => {\n                return {\n                        owner: info.p_owner,\n                        borrower: info.p_borrower,\n                        loanAmount: this.props.web3.utils.fromWei(info.p_loanAmount, 'ether'),\n                        status: this.getStatusDescription(info.p_status),\n                        lenderCount: parseInt(info.p_lenderCount)\n                    };\n            }).then(l => {\n                this.setState({loan: l});\n                this.refreshLenders();\n            });\n        } catch(error) {\n            console.error(error);\n        }\n    }\n\n    async refreshLenders() {\n        try {\n            const contract = new this.props.web3.eth.Contract(SimpleLoanContract.abi, this.props.match.params.id);\n            let count = await contract.methods.lenderCount().call();\n            let ls = [];\n            for(let i = 0; i < count; i++) {\n                let l = await contract.methods.lenderAt(i).call();\n                l.p_lendingAmount = this.props.web3.utils.fromWei(l.p_lendingAmount, 'ether');\n                l.p_repaidAmount = this.props.web3.utils.fromWei(l.p_repaidAmount, 'ether');\n                l.p_refundedAmount = this.props.web3.utils.fromWei(l.p_refundedAmount, 'ether');\n                ls.push(l);\n                console.log(l);\n            }    \n            this.setState({lenders: ls});\n        } catch(err) {\n            console.log(err);\n        }\n    }\n\n    handleFundIt = async(e) => {\n        e.preventDefault();\n        const { web3 } = this.state;\n        let loanAmount = web3.utils.toWei(e.target.fundAmount.value, 'ether');\n        let IRate = e.target.interestRate.value != '' ? web3.utils.toWei(e.target.interestRate.value, 'ether') : \"0\";\n        console.log(\"ll\"+loanAmount);\n        console.log(IRate);\n        let lenderAddr = await this.state.web3.eth.coinbase;\n        try {\n            const loan = new this.props.web3.eth.Contract(SimpleLoanContract.abi, this.props.match.params.id);\n            await loan.methods.depositFund(IRate).call({from: lenderAddr, value: loanAmount});\n            let tx = await loan.methods.depositFund(IRate).send({from: lenderAddr, value: loanAmount});\n            console.log(tx);\n            let l = {...this.state.loan};\n            l.lenderCount += 1;\n            l.status = this.getStatusDescription(await loan.methods.status().call());\n            this.setState({loan: l});\n        } catch(err) {\n            console.log(err);\n            this.setState({hasError: true, errorMessage: err.message});\n        }\n    }\n\n    handleRefund = async(e) => {\n        e.preventDefault();\n        const { web3 } = this.state;\n        let ownerAddr = await this.state.web3.eth.coinbase;\n        try {\n            const loan = new this.props.web3.eth.Contract(SimpleLoanContract.abi, this.props.match.params.id);\n            await loan.methods.refund().call({from: ownerAddr});\n            let tx = await loan.methods.refund().send({from: ownerAddr});\n            console.log(tx);\n            let l = {...this.state.loan};\n            l.lenderCount = parseInt(await loan.methods.lenderCount().call({from: ownerAddr}));\n            l.status = this.getStatusDescription(await loan.methods.status().call());\n            this.setState({loan: l});\n        } catch(err) {\n            console.log(err);\n            this.setState({hasError: true, errorMessage: err.message});\n        }\n    }\n\n    handleRepay = async(e) => {\n        e.preventDefault();\n        const { web3 } = this.state;\n        let borrowerAddr = await this.state.web3.eth.coinbase;\n        try {\n            const loan = new this.props.web3.eth.Contract(SimpleLoanContract.abi, this.props.match.params.id);\n            const ownedAmount = await loan.methods.ownedAmount().call();\n            await loan.methods.repay().call({from: borrowerAddr, value: ownedAmount});\n            let tx = await loan.methods.repay().send({from: borrowerAddr, value: ownedAmount});\n            console.log(tx);\n            let l = {...this.state.loan};\n            l.status = this.getStatusDescription(await loan.methods.status().call());\n            this.setState({loan: l, hasError: false});\n        } catch(err) {\n            console.log(err);\n            this.setState({hasError: true, errorMessage: err.message});\n        }\n    }\n\n    handleDefault = async(e) => {\n        e.preventDefault();\n        const { web3 } = this.state;\n        let borrowerAddr = await this.state.web3.eth.coinbase;\n        try {\n            const loan = new this.props.web3.eth.Contract(SimpleLoanContract.abi, this.props.match.params.id);\n            await loan.methods.toDefault().call({from: borrowerAddr});\n            let tx = await loan.methods.toDefault().send({from: borrowerAddr});\n            console.log(tx);\n            let l = {...this.state.loan};\n            l.status = this.getStatusDescription(await loan.methods.status().call());\n            this.setState({loan: l, hasError: false});\n        } catch(err) {\n            console.log(err);\n            this.setState({hasError: true, errorMessage: err.message});\n        }\n    }\n\n    handleBorrowerWithdraw = async() => {\n        const { web3 } = this.state;\n        let borrowerAddr = await this.state.web3.eth.coinbase;\n        try {\n            const loan = new web3.eth.Contract(SimpleLoanContract.abi, this.props.match.params.id);\n            await loan.methods.withdrawToBorrower().call({from: borrowerAddr});\n            let tx = await loan.methods.withdrawToBorrower().send({from: borrowerAddr});\n            console.log(tx);\n            let l = {...this.state.loan};\n            l.status = this.getStatusDescription(await loan.methods.status().call());\n            this.setState({loan: l, hasError: false});\n        } catch(err) {\n            console.log(err);\n            this.setState({hasError: true, errorMessage: err.message});\n        }\n    }\n\n    handleWithdrawToLenders = async() => {\n        const { web3 } = this.state;\n        let borrowerAddr = await this.state.web3.eth.coinbase;\n        try {\n            const loan = new web3.eth.Contract(SimpleLoanContract.abi, this.props.match.params.id);\n            await loan.methods.withdrawToLenders().call({from: borrowerAddr});\n            let tx = await loan.methods.withdrawToLenders().send({from: borrowerAddr});\n            console.log(tx);\n            let l = {...this.state.loan};\n            l.status = this.getStatusDescription(await loan.methods.status().call());\n            this.setState({loan: l, hasError: false});\n        } catch(err) {\n            console.log(err);\n            this.setState({hasError: true, errorMessage: err.message});\n        }\n    }\n\n    renderStatus() {\n        let style = \"badge badge-light\";\n        if (this.state.loan.status === 'Funded') {\n            style = 'badge badge-primary';\n        } else if (this.state.loan.status === 'Refunded') {\n            style = \"badge badge-info\";\n        } else if (this.state.loan.status === 'Defaulted') {\n            style = \"badge badge-danger\";\n        } else if (this.state.loan.status === 'Cancelled') {\n            style = \"badge badge-dark\";\n        } else if (this.state.loan.status === 'Closed') {\n            style = \"badge badge-secondary\";\n        } else if (this.state.loan.status === 'FundWithdrawn') {\n            style = \"badge badge-warning\";\n        } else if (this.state.loan.status === 'Repaid') {\n            style = \"badge badge-success\";\n        } \n        return (<h5><span className={style}>Status: {this.state.loan.status}</span></h5>);\n    }\n\n    render() {\n        return (\n            <div>\n                { this.state.hasError ? (\n                    <div className=\"alert alert-danger\" role=\"alert\">\n                        {this.state.errorMessage}\n                    </div>\n                  ) : (<div></div>)\n                }\n            <div className=\"row\">\n                <div className=\"col\">\n                <h6 htmlFor=\"borrowerAddr\">Owner: {this.state.loan.owner}</h6>\n                <h6 htmlFor=\"borrowerAddr\">Borrower: {this.state.loan.borrower}</h6>\n                <h5>Loan Amount: {this.state.loan.loanAmount} ETH</h5>\n                {this.renderStatus()}\n                \n                </div>\n            </div>\n            <div className=\"row\">\n                <div className=\"col\">\n                <hr/>\n                <h4>Lender Information</h4>\n                {/* Lender count: {this.state.loan.lenderCount} */}\n\n                <LenderTable lenders={this.state.lenders}/>\n\n                { this.state.loan.status === 'Funding' ? (\n                    <form className=\"form-inline\" onSubmit={this.handleFundIt}>\n                        <div className=\"form-group mb-2\">\n                            <input type=\"text\" readOnly className=\"form-control-plaintext\" id=\"staticEmail2\" value=\"Funding Amount\"/>\n                        </div>\n                        <div className=\"form-group mx-sm-3 mb-2\">\n                            <input type=\"text\" className=\"form-control\" id=\"fundAmount\" placeholder=\"Amount In Ether\"/>\n                            <input type=\"text\" className=\"form-control\" id=\"interestRate\" placeholder=\"Proposed interest rate\"/>\n\n                        </div>\n                        <button type=\"submit\" className=\"btn btn-primary mr-2\">Fund It !!!</button>\n                    </form>\n                  ) : (<div></div>)\n                }\n                <hr/>\n                <div>\n                { (this.state.loan.status === 'Funding' || this.state.loan.status === 'Funded') && this.state.loan.lenderCount > 0 ? (    \n                        <button onClick={this.handleRefund} className=\"btn btn-success mr-2\">Refund to Lenders</button>\n                    )  : (<div></div>)\n                }\n                { this.state.loan.status === 'Funded' ? (    \n                        <button onClick={this.handleBorrowerWithdraw} className=\"btn btn-success mr-2\">Widthdraw To Borrower Account</button>\n                    )  : (<div></div>)\n                }\n                { this.state.loan.status === 'FundWithdrawn' ? (    \n                        <React.Fragment>\n                        <button onClick={this.handleRepay} className=\"btn btn-success mr-2\">Repay Account</button>\n                        <button onClick={this.handleDefault} className=\"btn btn-danger mr-2\">Default Account</button>\n                        </React.Fragment>\n                    )  : (<div></div>)\n                }\n                 { this.state.loan.status === 'Repaid' ? (    \n                        <button onClick={this.handleWithdrawToLenders} className=\"btn btn-success mr-2\">Repay Lender In Full</button>\n                    )  : (<div></div>)\n                }\n                </div>\n                </div>\n            </div>\n            </div>\n        );\n    }\n}\n\nclass LenderTable extends Component {\n    render() {\n        return (\n            <React.Fragment>\n                <table className=\"table table-bordered\">\n                    <thead>\n                        <tr>\n                        <th scope=\"col\">#</th>\n                        <th scope=\"col\">Lender Address</th>\n                        <th scope=\"col\">Lending Amount</th>\n                        <th scope=\"col\">Repaid Amount</th>\n                        <th scope=\"col\">Refunded Amount</th>\n                        <th scope=\"col\">Proposed Interest Rate</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                {\n                    this.props.lenders.map((l,index) => (\n                            <tr>\n                            <th scope=\"row\">{++index}</th>\n                            <td>{l.p_lender}</td>\n                            <td className=\"text-center\">{l.p_lendingAmount} <small>ETH</small></td>\n                            <td className=\"text-center\">{l.p_repaidAmount} <small>ETH</small></td>\n                            <td className=\"text-center\">{l.p_refundedAmount} <small>ETH</small></td>\n                            <td className=\"text-center\">{l.p_interestRate} <small>ETH</small></td>\n\n                            </tr>\n                    ))\n                }\n                    </tbody>\n                </table>\n            </React.Fragment>\n        );\n    }\n}\n\nexport default LoanDetails;"]},"metadata":{},"sourceType":"module"}