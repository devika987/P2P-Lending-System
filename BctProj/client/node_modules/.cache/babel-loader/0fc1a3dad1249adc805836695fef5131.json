{"ast":null,"code":"import _regeneratorRuntime from \"/home/devika/FinalYear/blockchain/loanBCT/Blockchain-Simple-Loan-IOU-Application/client/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/home/devika/FinalYear/blockchain/loanBCT/Blockchain-Simple-Loan-IOU-Application/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"/home/devika/FinalYear/blockchain/loanBCT/Blockchain-Simple-Loan-IOU-Application/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/devika/FinalYear/blockchain/loanBCT/Blockchain-Simple-Loan-IOU-Application/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/devika/FinalYear/blockchain/loanBCT/Blockchain-Simple-Loan-IOU-Application/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/devika/FinalYear/blockchain/loanBCT/Blockchain-Simple-Loan-IOU-Application/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/devika/FinalYear/blockchain/loanBCT/Blockchain-Simple-Loan-IOU-Application/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/devika/FinalYear/blockchain/loanBCT/Blockchain-Simple-Loan-IOU-Application/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/devika/FinalYear/blockchain/loanBCT/Blockchain-Simple-Loan-IOU-Application/client/src/components/loandetails.jsx\";\nimport React, { Component } from \"react\";\nimport { Redirect } from 'react-router-dom';\nimport SimpleLoanContract from \"../contracts/SimpleLoan.json\";\n\nvar LoanDetails =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LoanDetails, _Component);\n\n  function LoanDetails() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, LoanDetails);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(LoanDetails)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      formTitle: \"Contract - \",\n      loan: {\n        owner: null,\n        borrower: null,\n        loanAmount: null,\n        status: null,\n        lenderCount: 0,\n        dueDate: null\n      },\n      lenders: []\n    };\n\n    _this.handleFundIt =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        var web3, loanAmount, IRate, lenderAddr, loan, tx, l;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                web3 = _this.state.web3;\n                loanAmount = web3.utils.toWei(e.target.fundAmount.value, 'ether');\n                IRate = web3.utils.toWei(e.target.interestRate.value, 'ether');\n                _context.next = 6;\n                return _this.state.web3.eth.coinbase;\n\n              case 6:\n                lenderAddr = _context.sent;\n                _context.prev = 7;\n                loan = new _this.props.web3.eth.Contract(SimpleLoanContract.abi, _this.props.match.params.id);\n                _context.next = 11;\n                return loan.methods.depositFund(IRate).call({\n                  from: lenderAddr,\n                  value: loanAmount\n                });\n\n              case 11:\n                _context.next = 13;\n                return loan.methods.depositFund(IRate).send({\n                  from: lenderAddr,\n                  value: loanAmount\n                });\n\n              case 13:\n                tx = _context.sent;\n                console.log(tx);\n                l = _objectSpread({}, _this.state.loan);\n                l.lenderCount += 1;\n                _context.t0 = _this;\n                _context.next = 20;\n                return loan.methods.status().call();\n\n              case 20:\n                _context.t1 = _context.sent;\n                l.status = _context.t0.getStatusDescription.call(_context.t0, _context.t1);\n\n                _this.setState({\n                  loan: l\n                });\n\n                _context.next = 29;\n                break;\n\n              case 25:\n                _context.prev = 25;\n                _context.t2 = _context[\"catch\"](7);\n                console.log(_context.t2);\n\n                _this.setState({\n                  hasError: true,\n                  errorMessage: _context.t2.message\n                });\n\n              case 29:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[7, 25]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.handleRefund =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(e) {\n        var web3, ownerAddr, loan, tx, l;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                e.preventDefault();\n                web3 = _this.state.web3;\n                _context2.next = 4;\n                return _this.state.web3.eth.coinbase;\n\n              case 4:\n                ownerAddr = _context2.sent;\n                _context2.prev = 5;\n                loan = new _this.props.web3.eth.Contract(SimpleLoanContract.abi, _this.props.match.params.id);\n                _context2.next = 9;\n                return loan.methods.refund().call({\n                  from: ownerAddr\n                });\n\n              case 9:\n                _context2.next = 11;\n                return loan.methods.refund().send({\n                  from: ownerAddr\n                });\n\n              case 11:\n                tx = _context2.sent;\n                console.log(tx);\n                l = _objectSpread({}, _this.state.loan);\n                _context2.t0 = parseInt;\n                _context2.next = 17;\n                return loan.methods.lenderCount().call({\n                  from: ownerAddr\n                });\n\n              case 17:\n                _context2.t1 = _context2.sent;\n                l.lenderCount = (0, _context2.t0)(_context2.t1);\n                _context2.t2 = _this;\n                _context2.next = 22;\n                return loan.methods.status().call();\n\n              case 22:\n                _context2.t3 = _context2.sent;\n                l.status = _context2.t2.getStatusDescription.call(_context2.t2, _context2.t3);\n\n                _this.setState({\n                  loan: l\n                });\n\n                _context2.next = 31;\n                break;\n\n              case 27:\n                _context2.prev = 27;\n                _context2.t4 = _context2[\"catch\"](5);\n                console.log(_context2.t4);\n\n                _this.setState({\n                  hasError: true,\n                  errorMessage: _context2.t4.message\n                });\n\n              case 31:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[5, 27]]);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.handleRepay =\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(e) {\n        var web3, borrowerAddr, loan, ownedAmount, tx, l;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                e.preventDefault();\n                web3 = _this.state.web3;\n                _context3.next = 4;\n                return _this.state.web3.eth.coinbase;\n\n              case 4:\n                borrowerAddr = _context3.sent;\n                _context3.prev = 5;\n                loan = new _this.props.web3.eth.Contract(SimpleLoanContract.abi, _this.props.match.params.id);\n                _context3.next = 9;\n                return loan.methods.ownedAmount().call();\n\n              case 9:\n                ownedAmount = _context3.sent;\n                _context3.next = 12;\n                return loan.methods.repay().call({\n                  from: borrowerAddr,\n                  value: ownedAmount\n                });\n\n              case 12:\n                _context3.next = 14;\n                return loan.methods.repay().send({\n                  from: borrowerAddr,\n                  value: ownedAmount\n                });\n\n              case 14:\n                tx = _context3.sent;\n                console.log(tx);\n                l = _objectSpread({}, _this.state.loan);\n                _context3.t0 = _this;\n                _context3.next = 20;\n                return loan.methods.status().call();\n\n              case 20:\n                _context3.t1 = _context3.sent;\n                l.status = _context3.t0.getStatusDescription.call(_context3.t0, _context3.t1);\n\n                _this.setState({\n                  loan: l,\n                  hasError: false\n                });\n\n                _context3.next = 29;\n                break;\n\n              case 25:\n                _context3.prev = 25;\n                _context3.t2 = _context3[\"catch\"](5);\n                console.log(_context3.t2);\n\n                _this.setState({\n                  hasError: true,\n                  errorMessage: _context3.t2.message\n                });\n\n              case 29:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[5, 25]]);\n      }));\n\n      return function (_x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    _this.handleBorrowerWithdraw =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee4() {\n      var web3, borrowerAddr, loan, tx, l;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              web3 = _this.state.web3;\n              _context4.next = 3;\n              return _this.state.web3.eth.coinbase;\n\n            case 3:\n              borrowerAddr = _context4.sent;\n              _context4.prev = 4;\n              loan = new web3.eth.Contract(SimpleLoanContract.abi, _this.props.match.params.id);\n              _context4.next = 8;\n              return loan.methods.withdrawToBorrower().call({\n                from: borrowerAddr\n              });\n\n            case 8:\n              _context4.next = 10;\n              return loan.methods.withdrawToBorrower().send({\n                from: borrowerAddr\n              });\n\n            case 10:\n              tx = _context4.sent;\n              console.log(tx); // this.state.loan.dueDate = await loan.methods.dueDate().call();\n\n              console.log(\"account default after\" + Date(_this.state.loan.dueDate));\n              l = _objectSpread({}, _this.state.loan);\n              _context4.t0 = _this;\n              _context4.next = 17;\n              return loan.methods.status().call();\n\n            case 17:\n              _context4.t1 = _context4.sent;\n              l.status = _context4.t0.getStatusDescription.call(_context4.t0, _context4.t1);\n\n              _this.setState({\n                loan: l,\n                hasError: false\n              });\n\n              _context4.next = 26;\n              break;\n\n            case 22:\n              _context4.prev = 22;\n              _context4.t2 = _context4[\"catch\"](4);\n              console.log(_context4.t2);\n\n              _this.setState({\n                hasError: true,\n                errorMessage: _context4.t2.message\n              });\n\n            case 26:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, this, [[4, 22]]);\n    }));\n    _this.handleWithdrawToLenders =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee5() {\n      var web3, borrowerAddr, loan, tx, l;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              web3 = _this.state.web3;\n              _context5.next = 3;\n              return _this.state.web3.eth.coinbase;\n\n            case 3:\n              borrowerAddr = _context5.sent;\n              _context5.prev = 4;\n              loan = new web3.eth.Contract(SimpleLoanContract.abi, _this.props.match.params.id);\n              _context5.next = 8;\n              return loan.methods.withdrawToLenders().call({\n                from: borrowerAddr\n              });\n\n            case 8:\n              _context5.next = 10;\n              return loan.methods.withdrawToLenders().send({\n                from: borrowerAddr\n              });\n\n            case 10:\n              tx = _context5.sent;\n              console.log(tx);\n              l = _objectSpread({}, _this.state.loan);\n              _context5.t0 = _this;\n              _context5.next = 16;\n              return loan.methods.status().call();\n\n            case 16:\n              _context5.t1 = _context5.sent;\n              l.status = _context5.t0.getStatusDescription.call(_context5.t0, _context5.t1);\n\n              _this.setState({\n                loan: l,\n                hasError: false\n              });\n\n              _context5.next = 25;\n              break;\n\n            case 21:\n              _context5.prev = 21;\n              _context5.t2 = _context5[\"catch\"](4);\n              console.log(_context5.t2);\n\n              _this.setState({\n                hasError: true,\n                errorMessage: _context5.t2.message\n              });\n\n            case 25:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, this, [[4, 21]]);\n    }));\n    return _this;\n  }\n\n  _createClass(LoanDetails, [{\n    key: \"getStatusDescription\",\n    value: function getStatusDescription(idx) {\n      switch (idx) {\n        case \"0\":\n          return 'Requesting';\n\n        case \"1\":\n          return 'Funding';\n\n        case \"2\":\n          return 'Funded';\n\n        case \"3\":\n          return 'FundWithdrawn';\n\n        case \"4\":\n          return 'Repaid';\n\n        case \"5\":\n          return 'Defaulted';\n\n        case \"6\":\n          return 'Refunded';\n\n        case \"7\":\n          return 'Cancelled';\n\n        case \"8\":\n          return 'Closed';\n\n        default:\n          return 'None';\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.setState({\n        web3: this.props.web3\n      });\n      this.props.onTitle(this.state.formTitle + this.props.match.params.id);\n\n      try {\n        var c = new this.props.web3.eth.Contract(SimpleLoanContract.abi, this.props.match.params.id); //clock.restore()\n\n        c.methods.info().call().then(function (info) {\n          console.log(info.p_dueDate);\n          var d = new Date(info.p_dueDate * 1000);\n          console.log(d.toDateString());\n          console.log(_this2.getStatusDescription(info.p_status));\n          console.log(info.p_now);\n          console.log(info.p_dueDate);\n\n          if (_this2.getStatusDescription(info.p_status) === 'FundWithdrawn' && info.p_now === info.p_dueDate) {\n            _this2.handleDefault();\n          }\n\n          return {\n            owner: info.p_owner,\n            borrower: info.p_borrower,\n            loanAmount: _this2.props.web3.utils.fromWei(info.p_loanAmount, 'ether'),\n            status: _this2.getStatusDescription(info.p_status),\n            lenderCount: parseInt(info.p_lenderCount),\n            dueDate: d.toDateString()\n          };\n        }).then(function (l) {\n          _this2.setState({\n            loan: l\n          });\n\n          _this2.refreshLenders();\n        });\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  }, {\n    key: \"refreshLenders\",\n    value: function () {\n      var _refreshLenders = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee6() {\n        var contract, count, ls, i, l;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                contract = new this.props.web3.eth.Contract(SimpleLoanContract.abi, this.props.match.params.id);\n                _context6.next = 4;\n                return contract.methods.lenderCount().call();\n\n              case 4:\n                count = _context6.sent;\n                ls = [];\n                i = 0;\n\n              case 7:\n                if (!(i < count)) {\n                  _context6.next = 20;\n                  break;\n                }\n\n                _context6.next = 10;\n                return contract.methods.lenderAt(i).call();\n\n              case 10:\n                l = _context6.sent;\n                l.p_lendingAmount = this.props.web3.utils.fromWei(l.p_lendingAmount, 'ether');\n                l.p_repaidAmount = this.props.web3.utils.fromWei(l.p_repaidAmount, 'ether');\n                l.p_refundedAmount = this.props.web3.utils.fromWei(l.p_refundedAmount, 'ether');\n                l.p_interestRate = this.props.web3.utils.fromWei(l.p_interestRate, 'ether');\n                ls.push(l);\n                console.log(l);\n\n              case 17:\n                i++;\n                _context6.next = 7;\n                break;\n\n              case 20:\n                this.setState({\n                  lenders: ls\n                });\n                _context6.next = 26;\n                break;\n\n              case 23:\n                _context6.prev = 23;\n                _context6.t0 = _context6[\"catch\"](0);\n                console.log(_context6.t0);\n\n              case 26:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[0, 23]]);\n      }));\n\n      function refreshLenders() {\n        return _refreshLenders.apply(this, arguments);\n      }\n\n      return refreshLenders;\n    }()\n  }, {\n    key: \"handleDefault\",\n    value: function () {\n      var _handleDefault = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee7() {\n        var web3, borrowerAddr, loan, tx1, l;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                web3 = this.state.web3;\n                _context7.next = 3;\n                return this.state.web3.eth.coinbase;\n\n              case 3:\n                borrowerAddr = _context7.sent;\n                _context7.prev = 4;\n                loan = new this.props.web3.eth.Contract(SimpleLoanContract.abi, this.props.match.params.id);\n                _context7.next = 8;\n                return loan.methods.refundAfterDefaulted().call({\n                  from: borrowerAddr\n                });\n\n              case 8:\n                _context7.next = 10;\n                return loan.methods.refundAfterDefaulted().send({\n                  from: borrowerAddr\n                });\n\n              case 10:\n                tx1 = _context7.sent;\n                console.log(tx1);\n                l = _objectSpread({}, this.state.loan);\n                _context7.t0 = parseInt;\n                _context7.next = 16;\n                return loan.methods.lenderCount().call({\n                  from: borrowerAddr\n                });\n\n              case 16:\n                _context7.t1 = _context7.sent;\n                l.lenderCount = (0, _context7.t0)(_context7.t1);\n                _context7.t2 = this;\n                _context7.next = 21;\n                return loan.methods.status().call();\n\n              case 21:\n                _context7.t3 = _context7.sent;\n                l.status = _context7.t2.getStatusDescription.call(_context7.t2, _context7.t3);\n                this.setState({\n                  loan: l,\n                  hasError: false\n                });\n                _context7.next = 30;\n                break;\n\n              case 26:\n                _context7.prev = 26;\n                _context7.t4 = _context7[\"catch\"](4);\n                console.log(_context7.t4);\n                this.setState({\n                  hasError: true,\n                  errorMessage: _context7.t4.message\n                });\n\n              case 30:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[4, 26]]);\n      }));\n\n      function handleDefault() {\n        return _handleDefault.apply(this, arguments);\n      }\n\n      return handleDefault;\n    }()\n  }, {\n    key: \"handleRefundAfterDefaulted\",\n    value: function () {\n      var _handleRefundAfterDefaulted = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee8() {\n        var web3, ownerAddr, loan, tx, l;\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                web3 = this.state.web3;\n                _context8.next = 3;\n                return this.state.web3.eth.coinbase;\n\n              case 3:\n                ownerAddr = _context8.sent;\n                _context8.prev = 4;\n                loan = new this.props.web3.eth.Contract(SimpleLoanContract.abi, this.props.match.params.id);\n                _context8.next = 8;\n                return loan.methods.refundAfterDefaulted().call({\n                  from: ownerAddr\n                });\n\n              case 8:\n                _context8.next = 10;\n                return loan.methods.refundAfterDefaulted().send({\n                  from: ownerAddr\n                });\n\n              case 10:\n                tx = _context8.sent;\n                console.log(tx);\n                l = _objectSpread({}, this.state.loan);\n                _context8.t0 = parseInt;\n                _context8.next = 16;\n                return loan.methods.lenderCount().call({\n                  from: ownerAddr\n                });\n\n              case 16:\n                _context8.t1 = _context8.sent;\n                l.lenderCount = (0, _context8.t0)(_context8.t1);\n                _context8.t2 = this;\n                _context8.next = 21;\n                return loan.methods.status().call();\n\n              case 21:\n                _context8.t3 = _context8.sent;\n                l.status = _context8.t2.getStatusDescription.call(_context8.t2, _context8.t3);\n                this.setState({\n                  loan: l\n                });\n                _context8.next = 30;\n                break;\n\n              case 26:\n                _context8.prev = 26;\n                _context8.t4 = _context8[\"catch\"](4);\n                console.log(_context8.t4);\n                this.setState({\n                  hasError: true,\n                  errorMessage: _context8.t4.message\n                });\n\n              case 30:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this, [[4, 26]]);\n      }));\n\n      function handleRefundAfterDefaulted() {\n        return _handleRefundAfterDefaulted.apply(this, arguments);\n      }\n\n      return handleRefundAfterDefaulted;\n    }()\n  }, {\n    key: \"renderStatus\",\n    value: function renderStatus() {\n      var style = \"badge badge-light\";\n\n      if (this.state.loan.status === 'Funded') {\n        style = 'badge badge-primary';\n      } else if (this.state.loan.status === 'Refunded') {\n        style = \"badge badge-info\";\n      } else if (this.state.loan.status === 'Defaulted') {\n        style = \"badge badge-danger\";\n      } else if (this.state.loan.status === 'Cancelled') {\n        style = \"badge badge-dark\";\n      } else if (this.state.loan.status === 'Closed') {\n        style = \"badge badge-secondary\";\n      } else if (this.state.loan.status === 'FundWithdrawn') {\n        style = \"badge badge-warning\";\n      } else if (this.state.loan.status === 'Repaid') {\n        style = \"badge badge-success\";\n      }\n\n      return React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: style,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, \"Status: \", this.state.loan.status));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, this.state.hasError ? React.createElement(\"div\", {\n        className: \"alert alert-danger\",\n        role: \"alert\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, this.state.errorMessage) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, React.createElement(\"h6\", {\n        htmlFor: \"borrowerAddr\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, \"Owner: \", this.state.loan.owner), React.createElement(\"h6\", {\n        htmlFor: \"borrowerAddr\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, \"Borrower: \", this.state.loan.borrower), React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, \"Loan Amount: \", this.state.loan.loanAmount, \" ETH\"), this.renderStatus(), this.state.loan.status === 'FundWithdrawn' ? React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, \" \", React.createElement(\"span\", {\n        className: \"badge badge-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, \"Account will get defaulted after \", this.state.loan.dueDate))) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }), React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, \"Lender Information\"), React.createElement(LenderTable, {\n        lenders: this.state.lenders,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }), this.state.loan.status === 'Funding' ? React.createElement(\"form\", {\n        className: \"form-inline\",\n        onSubmit: this.handleFundIt,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group mb-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        readOnly: true,\n        className: \"form-control-plaintext\",\n        id: \"staticEmail2\",\n        value: \"Funding Amount\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group mx-sm-3 mb-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        id: \"fundAmount\",\n        placeholder: \"Amount In Ether\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        id: \"interestRate\",\n        placeholder: \"Proposed Interest Rate\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary mr-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, \"Fund It !!!\")) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, (this.state.loan.status === 'Funding' || this.state.loan.status === 'Funded') && this.state.loan.lenderCount > 0 ? React.createElement(\"button\", {\n        onClick: this.handleRefund,\n        className: \"btn btn-success mr-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }, \"Refund to Lenders\") : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }), this.state.loan.status === 'Funded' ? React.createElement(\"button\", {\n        onClick: this.handleBorrowerWithdraw,\n        className: \"btn btn-success mr-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292\n        },\n        __self: this\n      }, \"Widthdraw To Borrower Account\") : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }), this.state.loan.status === 'FundWithdrawn' ? React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.handleRepay,\n        className: \"btn btn-success mr-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      }, \"Repay Account\")) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }), this.state.loan.status === 'Repaid' ? React.createElement(\"button\", {\n        onClick: this.handleWithdrawToLenders,\n        className: \"btn btn-success mr-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }, \"Repay Lender In Full\") : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return LoanDetails;\n}(Component);\n\nvar LenderTable =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(LenderTable, _Component2);\n\n  function LenderTable() {\n    _classCallCheck(this, LenderTable);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(LenderTable).apply(this, arguments));\n  }\n\n  _createClass(LenderTable, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        className: \"table table-bordered\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }, \"#\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, \"Lender Address\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323\n        },\n        __self: this\n      }, \"Lending Amount\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }, \"Repaid Amount\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }, \"Refunded Amount\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }, \"Proposed Interest rate\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330\n        },\n        __self: this\n      }, this.props.lenders.map(function (l, index) {\n        return React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 333\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 334\n          },\n          __self: this\n        }, ++index), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 335\n          },\n          __self: this\n        }, l.p_lender), React.createElement(\"td\", {\n          className: \"text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 336\n          },\n          __self: this\n        }, l.p_lendingAmount, \" \", React.createElement(\"small\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 336\n          },\n          __self: this\n        }, \"ETH\")), React.createElement(\"td\", {\n          className: \"text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 337\n          },\n          __self: this\n        }, l.p_repaidAmount, \" \", React.createElement(\"small\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 337\n          },\n          __self: this\n        }, \"ETH\")), React.createElement(\"td\", {\n          className: \"text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 338\n          },\n          __self: this\n        }, l.p_refundedAmount, \" \", React.createElement(\"small\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 338\n          },\n          __self: this\n        }, \"ETH\")), React.createElement(\"td\", {\n          className: \"text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 339\n          },\n          __self: this\n        }, l.p_interestRate, \" \", React.createElement(\"small\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 339\n          },\n          __self: this\n        }, \"ETH\")));\n      }))));\n    }\n  }]);\n\n  return LenderTable;\n}(Component);\n\nexport default LoanDetails;","map":{"version":3,"sources":["/home/devika/FinalYear/blockchain/loanBCT/Blockchain-Simple-Loan-IOU-Application/client/src/components/loandetails.jsx"],"names":["React","Component","Redirect","SimpleLoanContract","LoanDetails","state","formTitle","loan","owner","borrower","loanAmount","status","lenderCount","dueDate","lenders","handleFundIt","e","preventDefault","web3","utils","toWei","target","fundAmount","value","IRate","interestRate","eth","coinbase","lenderAddr","props","Contract","abi","match","params","id","methods","depositFund","call","from","send","tx","console","log","l","getStatusDescription","setState","hasError","errorMessage","message","handleRefund","ownerAddr","refund","parseInt","handleRepay","borrowerAddr","ownedAmount","repay","handleBorrowerWithdraw","withdrawToBorrower","Date","handleWithdrawToLenders","withdrawToLenders","idx","onTitle","c","info","then","p_dueDate","d","toDateString","p_status","p_now","handleDefault","p_owner","p_borrower","fromWei","p_loanAmount","p_lenderCount","refreshLenders","error","contract","count","ls","i","lenderAt","p_lendingAmount","p_repaidAmount","p_refundedAmount","p_interestRate","push","refundAfterDefaulted","tx1","style","renderStatus","LenderTable","map","index","p_lender"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Redirect } from 'react-router-dom';\nimport SimpleLoanContract from \"../contracts/SimpleLoan.json\"; \n\nclass LoanDetails extends Component {\n    state = {formTitle: \"Contract - \", loan: { owner: null, borrower: null, loanAmount: null, status: null, lenderCount: 0,  dueDate: null}, lenders: []};\n\n    getStatusDescription(idx) {\n        switch(idx) {\n            case \"0\": return 'Requesting';\n            case \"1\": return 'Funding';\n            case \"2\": return 'Funded';\n            case \"3\": return 'FundWithdrawn';\n            case \"4\": return 'Repaid';\n            case \"5\": return 'Defaulted';\n            case \"6\": return 'Refunded';\n            case \"7\": return 'Cancelled';\n            case \"8\": return 'Closed';\n            default: return 'None';\n        }\n    }\n    \n    componentDidMount() {\n        this.setState({web3: this.props.web3});\n        this.props.onTitle(this.state.formTitle + this.props.match.params.id);\n        try {\n            const c = new this.props.web3.eth.Contract(SimpleLoanContract.abi, this.props.match.params.id);\n           \n            //clock.restore()\n           \n            c.methods.info().call().then(info => {\n                console.log(info.p_dueDate);\n               let d = new Date(info.p_dueDate*1000);\n               \n                console.log(d.toDateString());\n                console.log(this.getStatusDescription(info.p_status));\n                console.log(info.p_now);\n                console.log(info.p_dueDate);\n                if(this.getStatusDescription(info.p_status)==='FundWithdrawn'&&info.p_now === info.p_dueDate){\n                  \n                        this.handleDefault();\n                }\n                return {\n                        owner: info.p_owner,\n                        borrower: info.p_borrower,\n                        loanAmount: this.props.web3.utils.fromWei(info.p_loanAmount, 'ether'),\n                        status: this.getStatusDescription(info.p_status),\n                        lenderCount: parseInt(info.p_lenderCount),\n                        dueDate:d.toDateString()\n                                         };\n            }).then(l => {\n                this.setState({loan: l});\n                this.refreshLenders();\n               \n            });\n        } catch(error) {\n            console.error(error);\n        }\n    }\n\n    async refreshLenders() {\n        try {\n            const contract = new this.props.web3.eth.Contract(SimpleLoanContract.abi, this.props.match.params.id);\n            let count = await contract.methods.lenderCount().call();\n            let ls = [];\n            for(let i = 0; i < count; i++) {\n                let l = await contract.methods.lenderAt(i).call();\n                l.p_lendingAmount = this.props.web3.utils.fromWei(l.p_lendingAmount, 'ether');\n                l.p_repaidAmount = this.props.web3.utils.fromWei(l.p_repaidAmount, 'ether');\n                l.p_refundedAmount = this.props.web3.utils.fromWei(l.p_refundedAmount, 'ether');\n                l.p_interestRate = this.props.web3.utils.fromWei(l.p_interestRate, 'ether');\n                ls.push(l);\n                console.log(l);\n            }    \n            this.setState({lenders: ls});\n        } catch(err) {\n            console.log(err);\n        }\n    }\n  async handleDefault(){\n        const { web3 } = this.state;\n        let borrowerAddr = await this.state.web3.eth.coinbase;\n        try {\n            const loan = new this.props.web3.eth.Contract(SimpleLoanContract.abi, this.props.match.params.id);\n            await loan.methods.refundAfterDefaulted().call({from: borrowerAddr});\n            let tx1 = await loan.methods.refundAfterDefaulted().send({from: borrowerAddr});\n            console.log(tx1);\n            let l = {...this.state.loan};\n\n            l.lenderCount = parseInt(await loan.methods.lenderCount().call({from:borrowerAddr}));\n            l.status = this.getStatusDescription(await loan.methods.status().call());\n            this.setState({loan: l, hasError: false});\n        } catch(err) {\n            console.log(err);\n            this.setState({hasError: true, errorMessage: err.message});\n        }\n    }\n    async handleRefundAfterDefaulted() {\n    const { web3 } = this.state;\n    let ownerAddr = await this.state.web3.eth.coinbase;\n    try {\n        const loan = new this.props.web3.eth.Contract(SimpleLoanContract.abi, this.props.match.params.id);\n        await loan.methods.refundAfterDefaulted().call({from: ownerAddr});\n        let tx = await loan.methods.refundAfterDefaulted().send({from: ownerAddr});\n        console.log(tx);\n        let l = {...this.state.loan};\n        l.lenderCount = parseInt(await loan.methods.lenderCount().call({from: ownerAddr}));\n        l.status = this.getStatusDescription(await loan.methods.status().call());\n        this.setState({loan: l});\n    } catch(err) {\n        console.log(err);\n        this.setState({hasError: true, errorMessage: err.message});\n    }\n}\n    handleFundIt = async(e) => {\n        e.preventDefault();\n        const { web3 } = this.state;\n        let loanAmount = web3.utils.toWei(e.target.fundAmount.value, 'ether');\n        let IRate = web3.utils.toWei(e.target.interestRate.value, 'ether');\n        let lenderAddr = await this.state.web3.eth.coinbase;\n        \n        try {\n            const loan = new this.props.web3.eth.Contract(SimpleLoanContract.abi, this.props.match.params.id);\n            await loan.methods.depositFund(IRate).call({from: lenderAddr, value: loanAmount});\n            let tx = await loan.methods.depositFund(IRate).send({from: lenderAddr, value: loanAmount});\n            console.log(tx);\n            let l = {...this.state.loan};\n            l.lenderCount += 1;\n            l.status = this.getStatusDescription(await loan.methods.status().call());\n\n            \n            this.setState({loan: l});\n        } catch(err) {\n            console.log(err);\n            this.setState({hasError: true, errorMessage: err.message});\n        }\n    }\n\n    handleRefund = async(e) => {\n        e.preventDefault();\n        const { web3 } = this.state;\n        let ownerAddr = await this.state.web3.eth.coinbase;\n        try {\n            const loan = new this.props.web3.eth.Contract(SimpleLoanContract.abi, this.props.match.params.id);\n            await loan.methods.refund().call({from: ownerAddr});\n            let tx = await loan.methods.refund().send({from: ownerAddr});\n            console.log(tx);\n            let l = {...this.state.loan};\n            l.lenderCount = parseInt(await loan.methods.lenderCount().call({from: ownerAddr}));\n            l.status = this.getStatusDescription(await loan.methods.status().call());\n            this.setState({loan: l});\n        } catch(err) {\n            console.log(err);\n            this.setState({hasError: true, errorMessage: err.message});\n        }\n    }\n\n    handleRepay = async(e) => {\n        e.preventDefault();\n        const { web3 } = this.state;\n        let borrowerAddr = await this.state.web3.eth.coinbase;\n        try {\n            const loan = new this.props.web3.eth.Contract(SimpleLoanContract.abi, this.props.match.params.id);\n            const ownedAmount = await loan.methods.ownedAmount().call();\n            await loan.methods.repay().call({from: borrowerAddr, value: ownedAmount});\n            let tx = await loan.methods.repay().send({from: borrowerAddr, value: ownedAmount});\n            console.log(tx);\n            let l = {...this.state.loan};\n            l.status = this.getStatusDescription(await loan.methods.status().call());\n            \n            this.setState({loan: l, hasError: false});\n        } catch(err) {\n            console.log(err);\n            this.setState({hasError: true, errorMessage: err.message});\n        }\n    }\n\n   \n\n    handleBorrowerWithdraw = async() => {\n        const { web3 } = this.state;\n        let borrowerAddr = await this.state.web3.eth.coinbase;\n        try {\n            const loan = new web3.eth.Contract(SimpleLoanContract.abi, this.props.match.params.id);\n            await loan.methods.withdrawToBorrower().call({from: borrowerAddr});\n            let tx = await loan.methods.withdrawToBorrower().send({from: borrowerAddr});\n            console.log(tx);\n\n           // this.state.loan.dueDate = await loan.methods.dueDate().call();\n            console.log(\"account default after\"+Date(this.state.loan.dueDate));\n            let l = {...this.state.loan};\n            l.status = this.getStatusDescription(await loan.methods.status().call());\n\n           \n            this.setState({loan: l, hasError: false});\n        } catch(err) {\n            console.log(err);\n            this.setState({hasError: true, errorMessage: err.message});\n        }\n    }\n\n    handleWithdrawToLenders = async() => {\n        const { web3 } = this.state;\n        let borrowerAddr = await this.state.web3.eth.coinbase;\n        try {\n            const loan = new web3.eth.Contract(SimpleLoanContract.abi, this.props.match.params.id);\n            await loan.methods.withdrawToLenders().call({from: borrowerAddr});\n            let tx = await loan.methods.withdrawToLenders().send({from: borrowerAddr});\n            console.log(tx);\n            let l = {...this.state.loan};\n            l.status = this.getStatusDescription(await loan.methods.status().call());\n          \n            this.setState({loan: l, hasError: false});\n        } catch(err) {\n            console.log(err);\n            this.setState({hasError: true, errorMessage: err.message});\n        }\n    }\n\n    renderStatus() {\n        let style = \"badge badge-light\";\n        if (this.state.loan.status === 'Funded') {\n            style = 'badge badge-primary';\n        } else if (this.state.loan.status === 'Refunded') {\n            style = \"badge badge-info\";\n        } else if (this.state.loan.status === 'Defaulted') {\n            style = \"badge badge-danger\";\n        } else if (this.state.loan.status === 'Cancelled') {\n            style = \"badge badge-dark\";\n        } else if (this.state.loan.status === 'Closed') {\n            style = \"badge badge-secondary\";\n        } else if (this.state.loan.status === 'FundWithdrawn') {\n            style = \"badge badge-warning\";\n        } else if (this.state.loan.status === 'Repaid') {\n            style = \"badge badge-success\";\n        } \n        return (<h5><span className={style}>Status: {this.state.loan.status}</span></h5>\n            );\n    }\n\n    render() {\n        return (\n            <div>\n                { this.state.hasError ? (\n                    <div className=\"alert alert-danger\" role=\"alert\">\n                        {this.state.errorMessage}\n                    </div>\n                  ) : (<div></div>)\n                }\n            <div className=\"row\">\n                <div className=\"col\">\n                <h6 htmlFor=\"borrowerAddr\">Owner: {this.state.loan.owner}</h6>\n                <h6 htmlFor=\"borrowerAddr\">Borrower: {this.state.loan.borrower}</h6>\n                <h5>Loan Amount: {this.state.loan.loanAmount} ETH</h5>\n                {this.renderStatus()}\n                { this.state.loan.status === 'FundWithdrawn' ? (    \n                        <React.Fragment>\n                        <h5 > <span className={\"badge badge-danger\"}>Account will get defaulted after {this.state.loan.dueDate}</span></h5>\n                        </React.Fragment>\n                    )  : (<div></div>)\n                }\n                </div>\n            </div>\n            <div className=\"row\">\n                <div className=\"col\">\n                <hr/>\n                <h4>Lender Information</h4>\n                {/* Lender count: {this.state.loan.lenderCount} */}\n\n                <LenderTable lenders={this.state.lenders}/>\n\n                { this.state.loan.status === 'Funding' ? (\n                    <form className=\"form-inline\" onSubmit={this.handleFundIt}>\n                        <div className=\"form-group mb-2\">\n                            <input type=\"text\" readOnly className=\"form-control-plaintext\" id=\"staticEmail2\" value=\"Funding Amount\"/>\n                        </div>\n                        <div className=\"form-group mx-sm-3 mb-2\">\n                            <input type=\"text\" className=\"form-control\" id=\"fundAmount\" placeholder=\"Amount In Ether\"/>\n                            <input type=\"text\" className=\"form-control\" id=\"interestRate\" placeholder=\"Proposed Interest Rate\"/>\n                        </div>\n                        <button type=\"submit\" className=\"btn btn-primary mr-2\">Fund It !!!</button>\n                    </form>\n                  ) : (<div></div>)\n                }\n                <hr/>\n                <div>\n                { (this.state.loan.status === 'Funding' || this.state.loan.status === 'Funded') && this.state.loan.lenderCount > 0 ? (    \n                        <button onClick={this.handleRefund} className=\"btn btn-success mr-2\">Refund to Lenders</button>\n                    )  : (<div></div>)\n                }\n                { this.state.loan.status === 'Funded' ? (    \n                        <button onClick={this.handleBorrowerWithdraw} className=\"btn btn-success mr-2\">Widthdraw To Borrower Account</button>\n                    )  : (<div></div>)\n                }\n                { this.state.loan.status === 'FundWithdrawn' ? (    \n                        <React.Fragment>\n                        <button onClick={this.handleRepay} className=\"btn btn-success mr-2\">Repay Account</button>\n                        {/*<button onClick={this.handleDefault} className=\"btn btn-danger mr-2\">Default Account</button>*/}\n                        </React.Fragment>\n                    )  : (<div></div>)\n                }\n                 { this.state.loan.status === 'Repaid' ? (    \n                        <button onClick={this.handleWithdrawToLenders} className=\"btn btn-success mr-2\">Repay Lender In Full</button>\n                    )  : (<div></div>)\n                }\n                </div>\n                </div>\n            </div>\n            </div>\n        );\n    }\n}\n\nclass LenderTable extends Component {\n    render() {\n        return (\n            <React.Fragment>\n                <table className=\"table table-bordered\">\n                    <thead>\n                        <tr>\n                        <th scope=\"col\">#</th>\n                        <th scope=\"col\">Lender Address</th>\n                        <th scope=\"col\">Lending Amount</th>\n                        <th scope=\"col\">Repaid Amount</th>\n                        <th scope=\"col\">Refunded Amount</th>\n                        <th scope=\"col\">Proposed Interest rate</th>\n\n                        </tr>\n                    </thead>\n                    <tbody>\n                {\n                    this.props.lenders.map((l,index) => (\n                            <tr>\n                            <th scope=\"row\">{++index}</th>\n                            <td>{l.p_lender}</td>\n                            <td className=\"text-center\">{l.p_lendingAmount} <small>ETH</small></td>\n                            <td className=\"text-center\">{l.p_repaidAmount} <small>ETH</small></td>\n                            <td className=\"text-center\">{l.p_refundedAmount} <small>ETH</small></td>\n                            <td className=\"text-center\">{l.p_interestRate} <small>ETH</small></td>\n\n                            </tr>\n                    ))\n                }\n                    </tbody>\n                </table>\n            </React.Fragment>\n        );\n    }\n}\n\nexport default LoanDetails;"]},"metadata":{},"sourceType":"module"}